{% extends 'bootstrap/base.html' %}
{% block title %}
{{ title }}
{% endblock %}
{% block content %}
<div class="container">
  <div class="text-center"> 
    <h1> {{ title }}</h1>
    <h3>Verify Pains Filter</h3> 

    <form action="\verify_pains_by_error" method=POST enctype=multipart/form-data>
      <table border=1 width="90%">
          <tr>
              <th>Reason for Failure</th> 
              <th>Action</th>
            </tr>
      {% for reason in reasons_for_failure%}
      <tr id={reason}>
      <td>
        {{reason}}
      </td>
      <td width="20">
         <input type="checkbox" name='{{reason}}' value='{{reason}}'/>
      </td>
        </tr>
      {% endfor %}
    </table>
    <input type="submit" name='action' value="Drop Selected Errors">
    <input type="submit" name='action' value="Ignore Selected Errors">
    </form>
    <br/>
    <form action="\verify_pains" method=POST enctype=multipart/form-data>
    <table border=1 width="90%"> 
        <tr>
            <th>Smile</th>
            <th>Reason</th> 
            <th>Action</th>
          </tr>
    {% for smile, reason in bad_smiles.items() %}
    <tr id={smile}>
      <td>
        {{smile}}
      </td>
    <td width="20">
      {{reason}}
    </td>
    <td>
       <input type="checkbox" name={{smile}} value={{smile}}/>
    </td>
      </tr>
    {% endfor %}
  </table>
  <input type="submit" name='action' value="Drop Selected Compounds">
  <input type="submit" name='action' value="Ignore Errors">
  </form>
  <br>
    <div class="text-left">
      <form action="\final_compounds" method=POST enctype=multipart/form-data>
        <script id='include_mpo_script' include_mpo={{include_mpo}}>
          include_mpo = document.getElementById('include_mpo_script').getAttribute('include_mpo');
          if (include_mpo == "True") {
            document.write('Mpo Score 0 Color: <input type="color" name="mpo0Color"/><br>Mpo Score 6 Color: <input type="color" name="mpo6Color"/><br>');
          } else {
            document.write('Display Color: <input type="color" name="mpo0Color"/><br>');
          }
        </script>
        Fingerprint Type:<br/>

        <!-- <select id="fp_select" name="fp_select" size="3">
          <option value="morgan" selected="selected">Morgan</option>
          <option value="atom-pair">Atom Pair</option>
          <option value="fpm">Fingerprint Mol</option>
        </select><br/> -->
        <input type="radio" name="fp_radio" id="morgan" value="morgan">
          <a target="_blank" href="https://www.rdkit.org/docs/GettingStartedInPython.html#morgan-fingerprints-circular-fingerprints">Morgan</a>
        </input><br/>
        <input type="radio" name="fp_radio" id="atom-pair" value="atom-pair">
          <a target="_blank" href="https://www.rdkit.org/docs/GettingStartedInPython.html#atom-pairs-and-topological-torsions">Atom Pair</a>
        </input><br/>
        <input type="radio" name="fp_radio" id="fpm" value="fpm">
          <a target="_blank" href="https://www.rdkit.org/docs/source/rdkit.Chem.Fingerprints.FingerprintMols.html#rdkit.Chem.Fingerprints.FingerprintMols.FingerprintMol">Info about Fingerprint Mol</a>
        </input><br>

        Tanimoto Coefficient: 

        <input type="number" id="tanimoto" name="tanimoto" step=".01" max=100 min=0/> 
        <script>
          function warnLow() {
            const tanimoto = document.getElementById("tanimoto").value;
            if (tanimoto < .6 && tanimoto > 0) {
              confirm("Low coefficient provided. Clustering may take a long time.");
            }
          }
        </script>
        <input type="submit" value="Cluster Compounds" onclick="warnLow()">
    </form>
      {% for error in errors %}
        <p class="error text-danger">{{ error }} </p> 
      {% endfor %}
  </div>
</br>
</div>
{% endblock %}